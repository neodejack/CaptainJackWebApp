// node_modules/.pnpm/pocketbase@0.8.3/node_modules/pocketbase/dist/pocketbase.es.mjs
var t = function(e2, n2) {
  return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t2, e3) {
    t2.__proto__ = e3;
  } || function(t2, e3) {
    for (var n3 in e3)
      Object.prototype.hasOwnProperty.call(e3, n3) && (t2[n3] = e3[n3]);
  }, t(e2, n2);
};
function e(e2, n2) {
  if ("function" != typeof n2 && null !== n2)
    throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
  function i2() {
    this.constructor = e2;
  }
  t(e2, n2), e2.prototype = null === n2 ? Object.create(n2) : (i2.prototype = n2.prototype, new i2());
}
var n = function() {
  return n = Object.assign || function(t2) {
    for (var e2, n2 = 1, i2 = arguments.length; n2 < i2; n2++)
      for (var o2 in e2 = arguments[n2])
        Object.prototype.hasOwnProperty.call(e2, o2) && (t2[o2] = e2[o2]);
    return t2;
  }, n.apply(this, arguments);
};
function i(t2, e2, n2, i2) {
  return new (n2 || (n2 = Promise))(function(o2, r2) {
    function s2(t3) {
      try {
        u2(i2.next(t3));
      } catch (t4) {
        r2(t4);
      }
    }
    function a2(t3) {
      try {
        u2(i2.throw(t3));
      } catch (t4) {
        r2(t4);
      }
    }
    function u2(t3) {
      var e3;
      t3.done ? o2(t3.value) : (e3 = t3.value, e3 instanceof n2 ? e3 : new n2(function(t4) {
        t4(e3);
      })).then(s2, a2);
    }
    u2((i2 = i2.apply(t2, e2 || [])).next());
  });
}
function o(t2, e2) {
  var n2, i2, o2, r2, s2 = { label: 0, sent: function() {
    if (1 & o2[0])
      throw o2[1];
    return o2[1];
  }, trys: [], ops: [] };
  return r2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (r2[Symbol.iterator] = function() {
    return this;
  }), r2;
  function a2(r3) {
    return function(a3) {
      return function(r4) {
        if (n2)
          throw new TypeError("Generator is already executing.");
        for (; s2; )
          try {
            if (n2 = 1, i2 && (o2 = 2 & r4[0] ? i2.return : r4[0] ? i2.throw || ((o2 = i2.return) && o2.call(i2), 0) : i2.next) && !(o2 = o2.call(i2, r4[1])).done)
              return o2;
            switch (i2 = 0, o2 && (r4 = [2 & r4[0], o2.value]), r4[0]) {
              case 0:
              case 1:
                o2 = r4;
                break;
              case 4:
                return s2.label++, { value: r4[1], done: false };
              case 5:
                s2.label++, i2 = r4[1], r4 = [0];
                continue;
              case 7:
                r4 = s2.ops.pop(), s2.trys.pop();
                continue;
              default:
                if (!(o2 = s2.trys, (o2 = o2.length > 0 && o2[o2.length - 1]) || 6 !== r4[0] && 2 !== r4[0])) {
                  s2 = 0;
                  continue;
                }
                if (3 === r4[0] && (!o2 || r4[1] > o2[0] && r4[1] < o2[3])) {
                  s2.label = r4[1];
                  break;
                }
                if (6 === r4[0] && s2.label < o2[1]) {
                  s2.label = o2[1], o2 = r4;
                  break;
                }
                if (o2 && s2.label < o2[2]) {
                  s2.label = o2[2], s2.ops.push(r4);
                  break;
                }
                o2[2] && s2.ops.pop(), s2.trys.pop();
                continue;
            }
            r4 = e2.call(t2, s2);
          } catch (t3) {
            r4 = [6, t3], i2 = 0;
          } finally {
            n2 = o2 = 0;
          }
        if (5 & r4[0])
          throw r4[1];
        return { value: r4[0] ? r4[1] : void 0, done: true };
      }([r3, a3]);
    };
  }
}
var r;
var s = function(t2) {
  function i2(e2) {
    var n2, o2 = this;
    return (o2 = t2.call(this, "ClientResponseError") || this).url = "", o2.status = 0, o2.data = {}, o2.isAbort = false, o2.originalError = null, Object.setPrototypeOf(o2, i2.prototype), e2 instanceof i2 || (o2.originalError = e2), null !== e2 && "object" == typeof e2 && (o2.url = "string" == typeof e2.url ? e2.url : "", o2.status = "number" == typeof e2.status ? e2.status : 0, o2.data = null !== e2.data && "object" == typeof e2.data ? e2.data : {}), "undefined" != typeof DOMException && e2 instanceof DOMException && (o2.isAbort = true), o2.name = "ClientResponseError " + o2.status, o2.message = null === (n2 = o2.data) || void 0 === n2 ? void 0 : n2.message, o2.message || (o2.message = o2.isAbort ? "The request was autocancelled. More info you could find in https://github.com/pocketbase/js-sdk#auto-cancellation." : "Something went wrong while processing your request."), o2;
  }
  return e(i2, t2), i2.prototype.toJSON = function() {
    return n({}, this);
  }, i2;
}(Error);
var a = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;
function u(t2, e2, n2) {
  var i2 = Object.assign({}, n2 || {}), o2 = i2.encode || l;
  if (!a.test(t2))
    throw new TypeError("argument name is invalid");
  var r2 = o2(e2);
  if (r2 && !a.test(r2))
    throw new TypeError("argument val is invalid");
  var s2 = t2 + "=" + r2;
  if (null != i2.maxAge) {
    var u2 = i2.maxAge - 0;
    if (isNaN(u2) || !isFinite(u2))
      throw new TypeError("option maxAge is invalid");
    s2 += "; Max-Age=" + Math.floor(u2);
  }
  if (i2.domain) {
    if (!a.test(i2.domain))
      throw new TypeError("option domain is invalid");
    s2 += "; Domain=" + i2.domain;
  }
  if (i2.path) {
    if (!a.test(i2.path))
      throw new TypeError("option path is invalid");
    s2 += "; Path=" + i2.path;
  }
  if (i2.expires) {
    if (!function(t3) {
      return "[object Date]" === Object.prototype.toString.call(t3) || t3 instanceof Date;
    }(i2.expires) || isNaN(i2.expires.valueOf()))
      throw new TypeError("option expires is invalid");
    s2 += "; Expires=" + i2.expires.toUTCString();
  }
  if (i2.httpOnly && (s2 += "; HttpOnly"), i2.secure && (s2 += "; Secure"), i2.priority)
    switch ("string" == typeof i2.priority ? i2.priority.toLowerCase() : i2.priority) {
      case "low":
        s2 += "; Priority=Low";
        break;
      case "medium":
        s2 += "; Priority=Medium";
        break;
      case "high":
        s2 += "; Priority=High";
        break;
      default:
        throw new TypeError("option priority is invalid");
    }
  if (i2.sameSite)
    switch ("string" == typeof i2.sameSite ? i2.sameSite.toLowerCase() : i2.sameSite) {
      case true:
        s2 += "; SameSite=Strict";
        break;
      case "lax":
        s2 += "; SameSite=Lax";
        break;
      case "strict":
        s2 += "; SameSite=Strict";
        break;
      case "none":
        s2 += "; SameSite=None";
        break;
      default:
        throw new TypeError("option sameSite is invalid");
    }
  return s2;
}
function c(t2) {
  return -1 !== t2.indexOf("%") ? decodeURIComponent(t2) : t2;
}
function l(t2) {
  return encodeURIComponent(t2);
}
function d(t2) {
  if (t2)
    try {
      var e2 = decodeURIComponent(r(t2.split(".")[1]).split("").map(function(t3) {
        return "%" + ("00" + t3.charCodeAt(0).toString(16)).slice(-2);
      }).join(""));
      return JSON.parse(e2) || {};
    } catch (t3) {
    }
  return {};
}
r = "function" == typeof atob ? atob : function(t2) {
  var e2 = String(t2).replace(/=+$/, "");
  if (e2.length % 4 == 1)
    throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");
  for (var n2, i2, o2 = 0, r2 = 0, s2 = ""; i2 = e2.charAt(r2++); ~i2 && (n2 = o2 % 4 ? 64 * n2 + i2 : i2, o2++ % 4) ? s2 += String.fromCharCode(255 & n2 >> (-2 * o2 & 6)) : 0)
    i2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i2);
  return s2;
};
var h = function() {
  function t2(t3) {
    void 0 === t3 && (t3 = {}), this.load(t3 || {});
  }
  return t2.prototype.load = function(t3) {
    for (var e2 = 0, n2 = Object.entries(t3); e2 < n2.length; e2++) {
      var i2 = n2[e2], o2 = i2[0], r2 = i2[1];
      this[o2] = r2;
    }
    this.id = void 0 !== t3.id ? t3.id : "", this.created = void 0 !== t3.created ? t3.created : "", this.updated = void 0 !== t3.updated ? t3.updated : "";
  }, Object.defineProperty(t2.prototype, "isNew", { get: function() {
    return !this.id;
  }, enumerable: false, configurable: true }), t2.prototype.clone = function() {
    return new this.constructor(JSON.parse(JSON.stringify(this)));
  }, t2.prototype.export = function() {
    return Object.assign({}, this);
  }, t2;
}();
var p = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.collectionId = "string" == typeof e2.collectionId ? e2.collectionId : "", this.collectionName = "string" == typeof e2.collectionName ? e2.collectionName : "", this.expand = "object" == typeof e2.expand && null !== e2.expand ? e2.expand : {};
  }, n2;
}(h);
var f = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.avatar = "number" == typeof e2.avatar ? e2.avatar : 0, this.email = "string" == typeof e2.email ? e2.email : "";
  }, n2;
}(h);
var v = function() {
  function t2() {
    this.baseToken = "", this.baseModel = null, this._onChangeCallbacks = [];
  }
  return Object.defineProperty(t2.prototype, "token", { get: function() {
    return this.baseToken;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "model", { get: function() {
    return this.baseModel;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "isValid", { get: function() {
    return !function(t3, e2) {
      void 0 === e2 && (e2 = 0);
      var n2 = d(t3);
      return !(Object.keys(n2).length > 0 && (!n2.exp || n2.exp - e2 > Date.now() / 1e3));
    }(this.token);
  }, enumerable: false, configurable: true }), t2.prototype.save = function(t3, e2) {
    this.baseToken = t3 || "", this.baseModel = null !== e2 && "object" == typeof e2 ? void 0 !== e2.collectionId ? new p(e2) : new f(e2) : null, this.triggerChange();
  }, t2.prototype.clear = function() {
    this.baseToken = "", this.baseModel = null, this.triggerChange();
  }, t2.prototype.loadFromCookie = function(t3, e2) {
    void 0 === e2 && (e2 = "pb_auth");
    var n2 = function(t4, e3) {
      var n3 = {};
      if ("string" != typeof t4)
        return n3;
      for (var i3 = Object.assign({}, e3 || {}).decode || c, o2 = 0; o2 < t4.length; ) {
        var r2 = t4.indexOf("=", o2);
        if (-1 === r2)
          break;
        var s2 = t4.indexOf(";", o2);
        if (-1 === s2)
          s2 = t4.length;
        else if (s2 < r2) {
          o2 = t4.lastIndexOf(";", r2 - 1) + 1;
          continue;
        }
        var a2 = t4.slice(o2, r2).trim();
        if (void 0 === n3[a2]) {
          var u2 = t4.slice(r2 + 1, s2).trim();
          34 === u2.charCodeAt(0) && (u2 = u2.slice(1, -1));
          try {
            n3[a2] = i3(u2);
          } catch (t5) {
            n3[a2] = u2;
          }
        }
        o2 = s2 + 1;
      }
      return n3;
    }(t3 || "")[e2] || "", i2 = {};
    try {
      (null === typeof (i2 = JSON.parse(n2)) || "object" != typeof i2 || Array.isArray(i2)) && (i2 = {});
    } catch (t4) {
    }
    this.save(i2.token || "", i2.model || null);
  }, t2.prototype.exportToCookie = function(t3, e2) {
    var n2, i2, o2;
    void 0 === e2 && (e2 = "pb_auth");
    var r2 = { secure: true, sameSite: true, httpOnly: true, path: "/" }, s2 = d(this.token);
    (null == s2 ? void 0 : s2.exp) ? r2.expires = new Date(1e3 * s2.exp) : r2.expires = new Date("1970-01-01"), t3 = Object.assign({}, r2, t3);
    var a2 = { token: this.token, model: (null === (n2 = this.model) || void 0 === n2 ? void 0 : n2.export()) || null }, c2 = u(e2, JSON.stringify(a2), t3), l2 = "undefined" != typeof Blob ? new Blob([c2]).size : c2.length;
    return a2.model && l2 > 4096 && (a2.model = { id: null === (i2 = null == a2 ? void 0 : a2.model) || void 0 === i2 ? void 0 : i2.id, email: null === (o2 = null == a2 ? void 0 : a2.model) || void 0 === o2 ? void 0 : o2.email }, this.model instanceof p && (a2.model.username = this.model.username, a2.model.verified = this.model.verified, a2.model.collectionId = this.model.collectionId), c2 = u(e2, JSON.stringify(a2), t3)), c2;
  }, t2.prototype.onChange = function(t3, e2) {
    var n2 = this;
    return void 0 === e2 && (e2 = false), this._onChangeCallbacks.push(t3), e2 && t3(this.token, this.model), function() {
      for (var e3 = n2._onChangeCallbacks.length - 1; e3 >= 0; e3--)
        if (n2._onChangeCallbacks[e3] == t3)
          return delete n2._onChangeCallbacks[e3], void n2._onChangeCallbacks.splice(e3, 1);
    };
  }, t2.prototype.triggerChange = function() {
    for (var t3 = 0, e2 = this._onChangeCallbacks; t3 < e2.length; t3++) {
      var n2 = e2[t3];
      n2 && n2(this.token, this.model);
    }
  }, t2;
}();
var m = function(t2) {
  function n2(e2) {
    void 0 === e2 && (e2 = "pocketbase_auth");
    var n3 = t2.call(this) || this;
    return n3.storageFallback = {}, n3.storageKey = e2, n3;
  }
  return e(n2, t2), Object.defineProperty(n2.prototype, "token", { get: function() {
    return (this._storageGet(this.storageKey) || {}).token || "";
  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, "model", { get: function() {
    var t3, e2 = this._storageGet(this.storageKey) || {};
    return null === e2 || "object" != typeof e2 || null === e2.model || "object" != typeof e2.model ? null : void 0 === (null === (t3 = e2.model) || void 0 === t3 ? void 0 : t3.collectionId) ? new f(e2.model) : new p(e2.model);
  }, enumerable: false, configurable: true }), n2.prototype.save = function(e2, n3) {
    this._storageSet(this.storageKey, { token: e2, model: n3 }), t2.prototype.save.call(this, e2, n3);
  }, n2.prototype.clear = function() {
    this._storageRemove(this.storageKey), t2.prototype.clear.call(this);
  }, n2.prototype._storageGet = function(t3) {
    if ("undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {
      var e2 = window.localStorage.getItem(t3) || "";
      try {
        return JSON.parse(e2);
      } catch (t4) {
        return e2;
      }
    }
    return this.storageFallback[t3];
  }, n2.prototype._storageSet = function(t3, e2) {
    if ("undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage)) {
      var n3 = e2;
      "string" != typeof e2 && (n3 = JSON.stringify(e2)), window.localStorage.setItem(t3, n3);
    } else
      this.storageFallback[t3] = e2;
  }, n2.prototype._storageRemove = function(t3) {
    var e2;
    "undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.localStorage) && (null === (e2 = window.localStorage) || void 0 === e2 || e2.removeItem(t3)), delete this.storageFallback[t3];
  }, n2;
}(v);
var b = function(t2) {
  this.client = t2;
};
var y = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getAll = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/settings", { method: "GET", params: t3 }).then(function(t4) {
      return t4 || {};
    });
  }, n2.prototype.update = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send("/api/settings", { method: "PATCH", params: e2, body: t3 }).then(function(t4) {
      return t4 || {};
    });
  }, n2.prototype.testS3 = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/settings/test/s3", { method: "POST", params: t3 }).then(function() {
      return true;
    });
  }, n2.prototype.testEmail = function(t3, e2, n3) {
    void 0 === n3 && (n3 = {});
    var i2 = { email: t3, template: e2 };
    return this.client.send("/api/settings/test/email", { method: "POST", params: n3, body: i2 }).then(function() {
      return true;
    });
  }, n2;
}(b);
var g = function(t2, e2, n2, i2, o2) {
  this.page = t2 > 0 ? t2 : 1, this.perPage = e2 >= 0 ? e2 : 0, this.totalItems = n2 >= 0 ? n2 : 0, this.totalPages = i2 >= 0 ? i2 : 0, this.items = o2 || [];
};
var w = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getFullList = function(t3, e2) {
    return void 0 === t3 && (t3 = 200), void 0 === e2 && (e2 = {}), this._getFullList(this.baseCrudPath, t3, e2);
  }, n2.prototype.getList = function(t3, e2, n3) {
    return void 0 === t3 && (t3 = 1), void 0 === e2 && (e2 = 30), void 0 === n3 && (n3 = {}), this._getList(this.baseCrudPath, t3, e2, n3);
  }, n2.prototype.getFirstListItem = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this._getFirstListItem(this.baseCrudPath, t3, e2);
  }, n2.prototype.getOne = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this._getOne(this.baseCrudPath, t3, e2);
  }, n2.prototype.create = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this._create(this.baseCrudPath, t3, e2);
  }, n2.prototype.update = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), this._update(this.baseCrudPath, t3, e2, n3);
  }, n2.prototype.delete = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this._delete(this.baseCrudPath, t3, e2);
  }, n2;
}(function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype._getFullList = function(t3, e2, n3) {
    var r2 = this;
    void 0 === e2 && (e2 = 100), void 0 === n3 && (n3 = {});
    var s2 = [], a2 = function(u2) {
      return i(r2, void 0, void 0, function() {
        return o(this, function(i2) {
          return [2, this._getList(t3, u2, e2, n3).then(function(t4) {
            var e3 = t4, n4 = e3.items, i3 = e3.totalItems;
            return s2 = s2.concat(n4), n4.length && i3 > s2.length ? a2(u2 + 1) : s2;
          })];
        });
      });
    };
    return a2(1);
  }, n2.prototype._getList = function(t3, e2, n3, i2) {
    var o2 = this;
    return void 0 === e2 && (e2 = 1), void 0 === n3 && (n3 = 30), void 0 === i2 && (i2 = {}), i2 = Object.assign({ page: e2, perPage: n3 }, i2), this.client.send(t3, { method: "GET", params: i2 }).then(function(t4) {
      var e3 = [];
      if (null == t4 ? void 0 : t4.items) {
        t4.items = t4.items || [];
        for (var n4 = 0, i3 = t4.items; n4 < i3.length; n4++) {
          var r2 = i3[n4];
          e3.push(o2.decode(r2));
        }
      }
      return new g((null == t4 ? void 0 : t4.page) || 1, (null == t4 ? void 0 : t4.perPage) || 0, (null == t4 ? void 0 : t4.totalItems) || 0, (null == t4 ? void 0 : t4.totalPages) || 0, e3);
    });
  }, n2.prototype._getOne = function(t3, e2, n3) {
    var i2 = this;
    return void 0 === n3 && (n3 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "GET", params: n3 }).then(function(t4) {
      return i2.decode(t4);
    });
  }, n2.prototype._getFirstListItem = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), n3 = Object.assign({ filter: e2, $cancelKey: "one_by_filter_" + t3 + "_" + e2 }, n3), this._getList(t3, 1, 1, n3).then(function(t4) {
      var e3;
      if (!(null === (e3 = null == t4 ? void 0 : t4.items) || void 0 === e3 ? void 0 : e3.length))
        throw new s({ status: 404, data: { code: 404, message: "The requested resource wasn't found.", data: {} } });
      return t4.items[0];
    });
  }, n2.prototype._create = function(t3, e2, n3) {
    var i2 = this;
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), this.client.send(t3, { method: "POST", params: n3, body: e2 }).then(function(t4) {
      return i2.decode(t4);
    });
  }, n2.prototype._update = function(t3, e2, n3, i2) {
    var o2 = this;
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "PATCH", params: i2, body: n3 }).then(function(t4) {
      return o2.decode(t4);
    });
  }, n2.prototype._delete = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this.client.send(t3 + "/" + encodeURIComponent(e2), { method: "DELETE", params: n3 }).then(function() {
      return true;
    });
  }, n2;
}(b));
var S = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new f(t3);
  }, Object.defineProperty(n2.prototype, "baseCrudPath", { get: function() {
    return "/api/admins";
  }, enumerable: false, configurable: true }), n2.prototype.update = function(e2, n3, i2) {
    var o2 = this;
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), t2.prototype.update.call(this, e2, n3, i2).then(function(t3) {
      var e3, n4;
      return o2.client.authStore.model && void 0 === (null === (e3 = o2.client.authStore.model) || void 0 === e3 ? void 0 : e3.collectionId) && (null === (n4 = o2.client.authStore.model) || void 0 === n4 ? void 0 : n4.id) === (null == t3 ? void 0 : t3.id) && o2.client.authStore.save(o2.client.authStore.token, t3), t3;
    });
  }, n2.prototype.delete = function(e2, n3) {
    var i2 = this;
    return void 0 === n3 && (n3 = {}), t2.prototype.delete.call(this, e2, n3).then(function(t3) {
      var n4, o2;
      return t3 && i2.client.authStore.model && void 0 === (null === (n4 = i2.client.authStore.model) || void 0 === n4 ? void 0 : n4.collectionId) && (null === (o2 = i2.client.authStore.model) || void 0 === o2 ? void 0 : o2.id) === e2 && i2.client.authStore.clear(), t3;
    });
  }, n2.prototype.authResponse = function(t3) {
    var e2 = this.decode((null == t3 ? void 0 : t3.admin) || {});
    return (null == t3 ? void 0 : t3.token) && (null == t3 ? void 0 : t3.admin) && this.client.authStore.save(t3.token, e2), Object.assign({}, t3, { token: (null == t3 ? void 0 : t3.token) || "", admin: e2 });
  }, n2.prototype.authWithPassword = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ identity: t3, password: e2 }, n3), this.client.send(this.baseCrudPath + "/auth-with-password", { method: "POST", params: i2, body: n3, headers: { Authorization: "" } }).then(this.authResponse.bind(this));
  }, n2.prototype.authRefresh = function(t3, e2) {
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send(this.baseCrudPath + "/auth-refresh", { method: "POST", params: e2, body: t3 }).then(this.authResponse.bind(this));
  }, n2.prototype.requestPasswordReset = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCrudPath + "/request-password-reset", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmPasswordReset = function(t3, e2, n3, i2, o2) {
    return void 0 === i2 && (i2 = {}), void 0 === o2 && (o2 = {}), i2 = Object.assign({ token: t3, password: e2, passwordConfirm: n3 }, i2), this.client.send(this.baseCrudPath + "/confirm-password-reset", { method: "POST", params: o2, body: i2 }).then(function() {
      return true;
    });
  }, n2;
}(w);
var C = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.recordId = "string" == typeof e2.recordId ? e2.recordId : "", this.collectionId = "string" == typeof e2.collectionId ? e2.collectionId : "", this.provider = "string" == typeof e2.provider ? e2.provider : "", this.providerId = "string" == typeof e2.providerId ? e2.providerId : "";
  }, n2;
}(h);
var O = function(t2) {
  function n2(e2, n3) {
    var i2 = t2.call(this, e2) || this;
    return i2.collectionIdOrName = n3, i2;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new p(t3);
  }, Object.defineProperty(n2.prototype, "baseCrudPath", { get: function() {
    return this.baseCollectionPath + "/records";
  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, "baseCollectionPath", { get: function() {
    return "/api/collections/" + encodeURIComponent(this.collectionIdOrName);
  }, enumerable: false, configurable: true }), n2.prototype.subscribeOne = function(t3, e2) {
    return i(this, void 0, void 0, function() {
      return o(this, function(n3) {
        return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subsribe(recordId, callback)."), [2, this.client.realtime.subscribe(this.collectionIdOrName + "/" + t3, e2)];
      });
    });
  }, n2.prototype.subscribe = function(t3, e2) {
    return i(this, void 0, void 0, function() {
      var n3;
      return o(this, function(i2) {
        if ("function" == typeof t3)
          return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subsribe('*', callback)."), [2, this.client.realtime.subscribe(this.collectionIdOrName, t3)];
        if (!e2)
          throw new Error("Missing subscription callback.");
        if ("" === t3)
          throw new Error("Missing topic.");
        return n3 = this.collectionIdOrName, "*" !== t3 && (n3 += "/" + t3), [2, this.client.realtime.subscribe(n3, e2)];
      });
    });
  }, n2.prototype.unsubscribe = function(t3) {
    return i(this, void 0, void 0, function() {
      return o(this, function(e2) {
        return "*" === t3 ? [2, this.client.realtime.unsubscribe(this.collectionIdOrName)] : t3 ? [2, this.client.realtime.unsubscribe(this.collectionIdOrName + "/" + t3)] : [2, this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)];
      });
    });
  }, n2.prototype.update = function(e2, n3, i2) {
    var o2 = this;
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), t2.prototype.update.call(this, e2, n3, i2).then(function(t3) {
      var e3, n4;
      return void 0 !== (null === (e3 = o2.client.authStore.model) || void 0 === e3 ? void 0 : e3.collectionId) && (null === (n4 = o2.client.authStore.model) || void 0 === n4 ? void 0 : n4.id) === (null == t3 ? void 0 : t3.id) && o2.client.authStore.save(o2.client.authStore.token, t3), t3;
    });
  }, n2.prototype.delete = function(e2, n3) {
    var i2 = this;
    return void 0 === n3 && (n3 = {}), t2.prototype.delete.call(this, e2, n3).then(function(t3) {
      var n4, o2;
      return t3 && void 0 !== (null === (n4 = i2.client.authStore.model) || void 0 === n4 ? void 0 : n4.collectionId) && (null === (o2 = i2.client.authStore.model) || void 0 === o2 ? void 0 : o2.id) === e2 && i2.client.authStore.clear(), t3;
    });
  }, n2.prototype.authResponse = function(t3) {
    var e2 = this.decode((null == t3 ? void 0 : t3.record) || {});
    return this.client.authStore.save(null == t3 ? void 0 : t3.token, e2), Object.assign({}, t3, { token: (null == t3 ? void 0 : t3.token) || "", record: e2 });
  }, n2.prototype.listAuthMethods = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send(this.baseCollectionPath + "/auth-methods", { method: "GET", params: t3 }).then(function(t4) {
      return Object.assign({}, t4, { usernamePassword: !!(null == t4 ? void 0 : t4.usernamePassword), emailPassword: !!(null == t4 ? void 0 : t4.emailPassword), authProviders: Array.isArray(null == t4 ? void 0 : t4.authProviders) ? null == t4 ? void 0 : t4.authProviders : [] });
    });
  }, n2.prototype.authWithPassword = function(t3, e2, n3, i2) {
    var o2 = this;
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ identity: t3, password: e2 }, n3), this.client.send(this.baseCollectionPath + "/auth-with-password", { method: "POST", params: i2, body: n3, headers: { Authorization: "" } }).then(function(t4) {
      return o2.authResponse(t4);
    });
  }, n2.prototype.authWithOAuth2 = function(t3, e2, n3, i2, o2, r2, s2) {
    var a2 = this;
    return void 0 === o2 && (o2 = {}), void 0 === r2 && (r2 = {}), void 0 === s2 && (s2 = {}), r2 = Object.assign({ provider: t3, code: e2, codeVerifier: n3, redirectUrl: i2, createData: o2 }, r2), this.client.send(this.baseCollectionPath + "/auth-with-oauth2", { method: "POST", params: s2, body: r2 }).then(function(t4) {
      return a2.authResponse(t4);
    });
  }, n2.prototype.authRefresh = function(t3, e2) {
    var n3 = this;
    return void 0 === t3 && (t3 = {}), void 0 === e2 && (e2 = {}), this.client.send(this.baseCollectionPath + "/auth-refresh", { method: "POST", params: e2, body: t3 }).then(function(t4) {
      return n3.authResponse(t4);
    });
  }, n2.prototype.requestPasswordReset = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCollectionPath + "/request-password-reset", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmPasswordReset = function(t3, e2, n3, i2, o2) {
    return void 0 === i2 && (i2 = {}), void 0 === o2 && (o2 = {}), i2 = Object.assign({ token: t3, password: e2, passwordConfirm: n3 }, i2), this.client.send(this.baseCollectionPath + "/confirm-password-reset", { method: "POST", params: o2, body: i2 }).then(function() {
      return true;
    });
  }, n2.prototype.requestVerification = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ email: t3 }, e2), this.client.send(this.baseCollectionPath + "/request-verification", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmVerification = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ token: t3 }, e2), this.client.send(this.baseCollectionPath + "/confirm-verification", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.requestEmailChange = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = {}), void 0 === n3 && (n3 = {}), e2 = Object.assign({ newEmail: t3 }, e2), this.client.send(this.baseCollectionPath + "/request-email-change", { method: "POST", params: n3, body: e2 }).then(function() {
      return true;
    });
  }, n2.prototype.confirmEmailChange = function(t3, e2, n3, i2) {
    return void 0 === n3 && (n3 = {}), void 0 === i2 && (i2 = {}), n3 = Object.assign({ token: t3, password: e2 }, n3), this.client.send(this.baseCollectionPath + "/confirm-email-change", { method: "POST", params: i2, body: n3 }).then(function() {
      return true;
    });
  }, n2.prototype.listExternalAuths = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(t3) + "/external-auths", { method: "GET", params: e2 }).then(function(t4) {
      var e3 = [];
      if (Array.isArray(t4))
        for (var n3 = 0, i2 = t4; n3 < i2.length; n3++) {
          var o2 = i2[n3];
          e3.push(new C(o2));
        }
      return e3;
    });
  }, n2.prototype.unlinkExternalAuth = function(t3, e2, n3) {
    return void 0 === n3 && (n3 = {}), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(t3) + "/external-auths/" + encodeURIComponent(e2), { method: "DELETE", params: n3 }).then(function() {
      return true;
    });
  }, n2;
}(w);
var P = function() {
  function t2(t3) {
    void 0 === t3 && (t3 = {}), this.load(t3 || {});
  }
  return t2.prototype.load = function(t3) {
    this.id = void 0 !== t3.id ? t3.id : "", this.name = void 0 !== t3.name ? t3.name : "", this.type = void 0 !== t3.type ? t3.type : "text", this.system = !!t3.system, this.required = !!t3.required, this.unique = !!t3.unique, this.options = "object" == typeof t3.options && null !== t3.options ? t3.options : {};
  }, t2;
}();
var I = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), this.system = !!e2.system, this.name = "string" == typeof e2.name ? e2.name : "", this.type = "string" == typeof e2.type ? e2.type : "base", this.options = void 0 !== e2.options ? e2.options : {}, this.listRule = "string" == typeof e2.listRule ? e2.listRule : null, this.viewRule = "string" == typeof e2.viewRule ? e2.viewRule : null, this.createRule = "string" == typeof e2.createRule ? e2.createRule : null, this.updateRule = "string" == typeof e2.updateRule ? e2.updateRule : null, this.deleteRule = "string" == typeof e2.deleteRule ? e2.deleteRule : null, e2.schema = Array.isArray(e2.schema) ? e2.schema : [], this.schema = [];
    for (var n3 = 0, i2 = e2.schema; n3 < i2.length; n3++) {
      var o2 = i2[n3];
      this.schema.push(new P(o2));
    }
  }, Object.defineProperty(n2.prototype, "isBase", { get: function() {
    return "base" === this.type;
  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, "isAuth", { get: function() {
    return "auth" === this.type;
  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, "isSingle", { get: function() {
    return "single" === this.type;
  }, enumerable: false, configurable: true }), n2;
}(h);
var T = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.decode = function(t3) {
    return new I(t3);
  }, Object.defineProperty(n2.prototype, "baseCrudPath", { get: function() {
    return "/api/collections";
  }, enumerable: false, configurable: true }), n2.prototype.import = function(t3, e2, n3) {
    return void 0 === e2 && (e2 = false), void 0 === n3 && (n3 = {}), i(this, void 0, void 0, function() {
      return o(this, function(i2) {
        return [2, this.client.send(this.baseCrudPath + "/import", { method: "PUT", params: n3, body: { collections: t3, deleteMissing: e2 } }).then(function() {
          return true;
        })];
      });
    });
  }, n2;
}(w);
var j = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.load = function(e2) {
    t2.prototype.load.call(this, e2), e2.remoteIp = e2.remoteIp || e2.ip, this.url = "string" == typeof e2.url ? e2.url : "", this.method = "string" == typeof e2.method ? e2.method : "GET", this.status = "number" == typeof e2.status ? e2.status : 200, this.auth = "string" == typeof e2.auth ? e2.auth : "guest", this.remoteIp = "string" == typeof e2.remoteIp ? e2.remoteIp : "", this.userIp = "string" == typeof e2.userIp ? e2.userIp : "", this.referer = "string" == typeof e2.referer ? e2.referer : "", this.userAgent = "string" == typeof e2.userAgent ? e2.userAgent : "", this.meta = "object" == typeof e2.meta && null !== e2.meta ? e2.meta : {};
  }, n2;
}(h);
var k = function(t2) {
  function n2() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return e(n2, t2), n2.prototype.getRequestsList = function(t3, e2, n3) {
    return void 0 === t3 && (t3 = 1), void 0 === e2 && (e2 = 30), void 0 === n3 && (n3 = {}), n3 = Object.assign({ page: t3, perPage: e2 }, n3), this.client.send("/api/logs/requests", { method: "GET", params: n3 }).then(function(t4) {
      var e3 = [];
      if (null == t4 ? void 0 : t4.items) {
        t4.items = (null == t4 ? void 0 : t4.items) || [];
        for (var n4 = 0, i2 = t4.items; n4 < i2.length; n4++) {
          var o2 = i2[n4];
          e3.push(new j(o2));
        }
      }
      return new g((null == t4 ? void 0 : t4.page) || 1, (null == t4 ? void 0 : t4.perPage) || 0, (null == t4 ? void 0 : t4.totalItems) || 0, (null == t4 ? void 0 : t4.totalPages) || 0, e3);
    });
  }, n2.prototype.getRequest = function(t3, e2) {
    return void 0 === e2 && (e2 = {}), this.client.send("/api/logs/requests/" + encodeURIComponent(t3), { method: "GET", params: e2 }).then(function(t4) {
      return new j(t4);
    });
  }, n2.prototype.getRequestsStats = function(t3) {
    return void 0 === t3 && (t3 = {}), this.client.send("/api/logs/requests/stats", { method: "GET", params: t3 }).then(function(t4) {
      return t4;
    });
  }, n2;
}(b);
var E = function(t2) {
  function n2() {
    var e2 = null !== t2 && t2.apply(this, arguments) || this;
    return e2.clientId = "", e2.eventSource = null, e2.subscriptions = {}, e2.lastSentTopics = [], e2.maxConnectTimeout = 1e4, e2.reconnectAttempts = 0, e2.maxReconnectAttempts = 1 / 0, e2.predefinedReconnectIntervals = [200, 300, 500, 1e3, 1200, 1500, 2e3], e2.pendingConnects = [], e2;
  }
  return e(n2, t2), Object.defineProperty(n2.prototype, "isConnected", { get: function() {
    return !!this.eventSource && !!this.clientId && !this.pendingConnects.length;
  }, enumerable: false, configurable: true }), n2.prototype.subscribe = function(t3, e2) {
    var n3;
    return i(this, void 0, void 0, function() {
      var r2, s2 = this;
      return o(this, function(a2) {
        switch (a2.label) {
          case 0:
            if (!t3)
              throw new Error("topic must be set.");
            return r2 = function(t4) {
              var n4, i2 = t4;
              try {
                n4 = JSON.parse(null == i2 ? void 0 : i2.data);
              } catch (t5) {
              }
              e2(n4 || {});
            }, this.subscriptions[t3] || (this.subscriptions[t3] = []), this.subscriptions[t3].push(r2), this.isConnected ? [3, 2] : [4, this.connect()];
          case 1:
            return a2.sent(), [3, 5];
          case 2:
            return 1 !== this.subscriptions[t3].length ? [3, 4] : [4, this.submitSubscriptions()];
          case 3:
            return a2.sent(), [3, 5];
          case 4:
            null === (n3 = this.eventSource) || void 0 === n3 || n3.addEventListener(t3, r2), a2.label = 5;
          case 5:
            return [2, function() {
              return i(s2, void 0, void 0, function() {
                return o(this, function(e3) {
                  return [2, this.unsubscribeByTopicAndListener(t3, r2)];
                });
              });
            }];
        }
      });
    });
  }, n2.prototype.unsubscribe = function(t3) {
    var e2;
    return i(this, void 0, void 0, function() {
      var n3, i2, r2;
      return o(this, function(o2) {
        switch (o2.label) {
          case 0:
            if (!this.hasSubscriptionListeners(t3))
              return [2];
            if (t3) {
              for (n3 = 0, i2 = this.subscriptions[t3]; n3 < i2.length; n3++)
                r2 = i2[n3], null === (e2 = this.eventSource) || void 0 === e2 || e2.removeEventListener(t3, r2);
              delete this.subscriptions[t3];
            } else
              this.subscriptions = {};
            return this.hasSubscriptionListeners() ? [3, 1] : (this.disconnect(), [3, 3]);
          case 1:
            return this.hasSubscriptionListeners(t3) ? [3, 3] : [4, this.submitSubscriptions()];
          case 2:
            o2.sent(), o2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n2.prototype.unsubscribeByPrefix = function(t3) {
    var e2;
    return i(this, void 0, void 0, function() {
      var n3, i2, r2, s2, a2;
      return o(this, function(o2) {
        switch (o2.label) {
          case 0:
            for (i2 in n3 = false, this.subscriptions)
              if (i2.startsWith(t3)) {
                for (n3 = true, r2 = 0, s2 = this.subscriptions[i2]; r2 < s2.length; r2++)
                  a2 = s2[r2], null === (e2 = this.eventSource) || void 0 === e2 || e2.removeEventListener(i2, a2);
                delete this.subscriptions[i2];
              }
            return n3 ? this.hasSubscriptionListeners() ? [4, this.submitSubscriptions()] : [3, 2] : [2];
          case 1:
            return o2.sent(), [3, 3];
          case 2:
            this.disconnect(), o2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n2.prototype.unsubscribeByTopicAndListener = function(t3, e2) {
    var n3;
    return i(this, void 0, void 0, function() {
      var i2, r2;
      return o(this, function(o2) {
        switch (o2.label) {
          case 0:
            if (!Array.isArray(this.subscriptions[t3]) || !this.subscriptions[t3].length)
              return [2];
            for (i2 = false, r2 = this.subscriptions[t3].length - 1; r2 >= 0; r2--)
              this.subscriptions[t3][r2] === e2 && (i2 = true, delete this.subscriptions[t3][r2], this.subscriptions[t3].splice(r2, 1), null === (n3 = this.eventSource) || void 0 === n3 || n3.removeEventListener(t3, e2));
            return i2 ? (this.subscriptions[t3].length || delete this.subscriptions[t3], this.hasSubscriptionListeners() ? [3, 1] : (this.disconnect(), [3, 3])) : [2];
          case 1:
            return this.hasSubscriptionListeners(t3) ? [3, 3] : [4, this.submitSubscriptions()];
          case 2:
            o2.sent(), o2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n2.prototype.hasSubscriptionListeners = function(t3) {
    var e2, n3;
    if (this.subscriptions = this.subscriptions || {}, t3)
      return !!(null === (e2 = this.subscriptions[t3]) || void 0 === e2 ? void 0 : e2.length);
    for (var i2 in this.subscriptions)
      if (null === (n3 = this.subscriptions[i2]) || void 0 === n3 ? void 0 : n3.length)
        return true;
    return false;
  }, n2.prototype.submitSubscriptions = function() {
    return i(this, void 0, void 0, function() {
      return o(this, function(t3) {
        return this.clientId ? (this.addAllSubscriptionListeners(), this.lastSentTopics = this.getNonEmptySubscriptionTopics(), [2, this.client.send("/api/realtime", { method: "POST", body: { clientId: this.clientId, subscriptions: this.lastSentTopics }, params: { $cancelKey: "realtime_" + this.clientId } }).catch(function(t4) {
          if (!(null == t4 ? void 0 : t4.isAbort))
            throw t4;
        })]) : [2];
      });
    });
  }, n2.prototype.getNonEmptySubscriptionTopics = function() {
    var t3 = [];
    for (var e2 in this.subscriptions)
      this.subscriptions[e2].length && t3.push(e2);
    return t3;
  }, n2.prototype.addAllSubscriptionListeners = function() {
    if (this.eventSource)
      for (var t3 in this.removeAllSubscriptionListeners(), this.subscriptions)
        for (var e2 = 0, n3 = this.subscriptions[t3]; e2 < n3.length; e2++) {
          var i2 = n3[e2];
          this.eventSource.addEventListener(t3, i2);
        }
  }, n2.prototype.removeAllSubscriptionListeners = function() {
    if (this.eventSource)
      for (var t3 in this.subscriptions)
        for (var e2 = 0, n3 = this.subscriptions[t3]; e2 < n3.length; e2++) {
          var i2 = n3[e2];
          this.eventSource.removeEventListener(t3, i2);
        }
  }, n2.prototype.connect = function() {
    return i(this, void 0, void 0, function() {
      var t3 = this;
      return o(this, function(e2) {
        return this.reconnectAttempts > 0 ? [2] : [2, new Promise(function(e3, n3) {
          t3.pendingConnects.push({ resolve: e3, reject: n3 }), t3.pendingConnects.length > 1 || t3.initConnect();
        })];
      });
    });
  }, n2.prototype.initConnect = function() {
    var t3 = this;
    this.disconnect(true), clearTimeout(this.connectTimeoutId), this.connectTimeoutId = setTimeout(function() {
      t3.connectErrorHandler(new Error("EventSource connect took too long."));
    }, this.maxConnectTimeout), this.eventSource = new EventSource(this.client.buildUrl("/api/realtime")), this.eventSource.onerror = function(e2) {
      t3.connectErrorHandler(new Error("Failed to establish realtime connection."));
    }, this.eventSource.addEventListener("PB_CONNECT", function(e2) {
      var n3 = e2;
      t3.clientId = null == n3 ? void 0 : n3.lastEventId, t3.submitSubscriptions().then(function() {
        return i(t3, void 0, void 0, function() {
          var t4;
          return o(this, function(e3) {
            switch (e3.label) {
              case 0:
                t4 = 3, e3.label = 1;
              case 1:
                return this.hasUnsentSubscriptions() && t4 > 0 ? (t4--, [4, this.submitSubscriptions()]) : [3, 3];
              case 2:
                return e3.sent(), [3, 1];
              case 3:
                return [2];
            }
          });
        });
      }).then(function() {
        for (var e3 = 0, n4 = t3.pendingConnects; e3 < n4.length; e3++) {
          n4[e3].resolve();
        }
        t3.pendingConnects = [], t3.reconnectAttempts = 0, clearTimeout(t3.reconnectTimeoutId), clearTimeout(t3.connectTimeoutId);
      }).catch(function(e3) {
        t3.clientId = "", t3.connectErrorHandler(e3);
      });
    });
  }, n2.prototype.hasUnsentSubscriptions = function() {
    var t3 = this.getNonEmptySubscriptionTopics();
    if (t3.length != this.lastSentTopics.length)
      return true;
    for (var e2 = 0, n3 = t3; e2 < n3.length; e2++) {
      var i2 = n3[e2];
      if (!this.lastSentTopics.includes(i2))
        return true;
    }
    return false;
  }, n2.prototype.connectErrorHandler = function(t3) {
    var e2 = this;
    if (clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), !this.clientId && !this.reconnectAttempts || this.reconnectAttempts > this.maxReconnectAttempts) {
      for (var n3 = 0, i2 = this.pendingConnects; n3 < i2.length; n3++) {
        i2[n3].reject(new s(t3));
      }
      this.disconnect();
    } else {
      this.disconnect(true);
      var o2 = this.predefinedReconnectIntervals[this.reconnectAttempts] || this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length - 1];
      this.reconnectAttempts++, this.reconnectTimeoutId = setTimeout(function() {
        e2.initConnect();
      }, o2);
    }
  }, n2.prototype.disconnect = function(t3) {
    var e2;
    if (void 0 === t3 && (t3 = false), clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), this.removeAllSubscriptionListeners(), null === (e2 = this.eventSource) || void 0 === e2 || e2.close(), this.eventSource = null, this.clientId = "", !t3) {
      this.reconnectAttempts = 0;
      for (var n3 = new s(new Error("Realtime disconnected.")), i2 = 0, o2 = this.pendingConnects; i2 < o2.length; i2++) {
        o2[i2].reject(n3);
      }
      this.pendingConnects = [];
    }
  }, n2;
}(b);
var R = function() {
  function t2(t3, e2, n2) {
    void 0 === t3 && (t3 = "/"), void 0 === n2 && (n2 = "en-US"), this.cancelControllers = {}, this.recordServices = {}, this.enableAutoCancellation = true, this.baseUrl = t3, this.lang = n2, this.authStore = e2 || new m(), this.admins = new S(this), this.collections = new T(this), this.logs = new k(this), this.settings = new y(this), this.realtime = new E(this);
  }
  return t2.prototype.collection = function(t3) {
    return this.recordServices[t3] || (this.recordServices[t3] = new O(this, t3)), this.recordServices[t3];
  }, t2.prototype.autoCancellation = function(t3) {
    return this.enableAutoCancellation = !!t3, this;
  }, t2.prototype.cancelRequest = function(t3) {
    return this.cancelControllers[t3] && (this.cancelControllers[t3].abort(), delete this.cancelControllers[t3]), this;
  }, t2.prototype.cancelAllRequests = function() {
    for (var t3 in this.cancelControllers)
      this.cancelControllers[t3].abort();
    return this.cancelControllers = {}, this;
  }, t2.prototype.send = function(t3, e2) {
    var n2, r2, a2, u2, c2, l2, d2, h2;
    return i(this, void 0, void 0, function() {
      var p2, f2, v2, m2, b2, y2 = this;
      return o(this, function(g2) {
        return (p2 = Object.assign({ method: "GET" }, e2)).body && "FormData" !== p2.body.constructor.name && ("string" != typeof p2.body && (p2.body = JSON.stringify(p2.body)), void 0 === (null === (n2 = null == p2 ? void 0 : p2.headers) || void 0 === n2 ? void 0 : n2["Content-Type"]) && (p2.headers = Object.assign({}, p2.headers, { "Content-Type": "application/json" }))), void 0 === (null === (r2 = null == p2 ? void 0 : p2.headers) || void 0 === r2 ? void 0 : r2["Accept-Language"]) && (p2.headers = Object.assign({}, p2.headers, { "Accept-Language": this.lang })), (null === (a2 = this.authStore) || void 0 === a2 ? void 0 : a2.token) && void 0 === (null === (u2 = null == p2 ? void 0 : p2.headers) || void 0 === u2 ? void 0 : u2.Authorization) && (p2.headers = Object.assign({}, p2.headers, { Authorization: this.authStore.token })), this.enableAutoCancellation && false !== (null === (c2 = p2.params) || void 0 === c2 ? void 0 : c2.$autoCancel) && (f2 = (null === (l2 = p2.params) || void 0 === l2 ? void 0 : l2.$cancelKey) || (p2.method || "GET") + t3, this.cancelRequest(f2), v2 = new AbortController(), this.cancelControllers[f2] = v2, p2.signal = v2.signal), null === (d2 = p2.params) || void 0 === d2 || delete d2.$autoCancel, null === (h2 = p2.params) || void 0 === h2 || delete h2.$cancelKey, m2 = this.buildUrl(t3), void 0 !== p2.params && ((b2 = this.serializeQueryParams(p2.params)) && (m2 += (m2.includes("?") ? "&" : "?") + b2), delete p2.params), this.beforeSend && (p2 = Object.assign({}, this.beforeSend(m2, p2))), [2, fetch(m2, p2).then(function(t4) {
          return i(y2, void 0, void 0, function() {
            var e3;
            return o(this, function(n3) {
              switch (n3.label) {
                case 0:
                  e3 = {}, n3.label = 1;
                case 1:
                  return n3.trys.push([1, 3, , 4]), [4, t4.json()];
                case 2:
                  return e3 = n3.sent(), [3, 4];
                case 3:
                  return n3.sent(), [3, 4];
                case 4:
                  if (this.afterSend && (e3 = this.afterSend(t4, e3)), t4.status >= 400)
                    throw new s({ url: t4.url, status: t4.status, data: e3 });
                  return [2, e3];
              }
            });
          });
        }).catch(function(t4) {
          throw new s(t4);
        })];
      });
    });
  }, t2.prototype.getFileUrl = function(t3, e2, n2) {
    void 0 === n2 && (n2 = {});
    var i2 = [];
    i2.push("api"), i2.push("files"), i2.push(encodeURIComponent(t3.collectionId || t3.collectionName)), i2.push(encodeURIComponent(t3.id)), i2.push(encodeURIComponent(e2));
    var o2 = this.buildUrl(i2.join("/"));
    if (Object.keys(n2).length) {
      var r2 = new URLSearchParams(n2);
      o2 += (o2.includes("?") ? "&" : "?") + r2;
    }
    return o2;
  }, t2.prototype.buildUrl = function(t3) {
    var e2 = this.baseUrl + (this.baseUrl.endsWith("/") ? "" : "/");
    return t3 && (e2 += t3.startsWith("/") ? t3.substring(1) : t3), e2;
  }, t2.prototype.serializeQueryParams = function(t3) {
    var e2 = [];
    for (var n2 in t3)
      if (null !== t3[n2]) {
        var i2 = t3[n2], o2 = encodeURIComponent(n2);
        if (Array.isArray(i2))
          for (var r2 = 0, s2 = i2; r2 < s2.length; r2++) {
            var a2 = s2[r2];
            e2.push(o2 + "=" + encodeURIComponent(a2));
          }
        else
          i2 instanceof Date ? e2.push(o2 + "=" + encodeURIComponent(i2.toISOString())) : null !== typeof i2 && "object" == typeof i2 ? e2.push(o2 + "=" + encodeURIComponent(JSON.stringify(i2))) : e2.push(o2 + "=" + encodeURIComponent(i2));
      }
    return e2.join("&");
  }, t2;
}();

// dep:pocketbase
var pocketbase_default = R;
export {
  f as Admin,
  v as BaseAuthStore,
  h as BaseModel,
  s as ClientResponseError,
  I as Collection,
  C as ExternalAuth,
  g as ListResult,
  m as LocalAuthStore,
  j as LogRequest,
  p as Record,
  P as SchemaField,
  pocketbase_default as default,
  d as getTokenPayload
};
//# sourceMappingURL=pocketbase.js.map
